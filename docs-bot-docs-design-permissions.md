<h1>Choose your permissions | Root developer documentation</h1>
<header><h1>Choose your permissions</h1></header>
<p>Permissions control which parts of the Root Community API your code can use.</p>
<p>By the end of this article, you’ll be able to:</p>
<ul>
<li class="">Determine whether your code needs to declare permissions.</li>
<li class="">Identify the appropriate set of permissions to include in your manifest.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-the-community-api">What is the Community API?<a href="#what-is-the-community-api" class="hash-link" aria-label="Direct link to What is the Community API?" title="Direct link to What is the Community API?" translate="no">​</a></h2>
<p>The Root <em>Community API</em> is a subset of the Root APIs that lets your server-side code manipulate the community it's attached to. For example, you can read/write channel messages, assign member roles, and update community branding.</p>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-are-permissions">What are permissions?<a href="#what-are-permissions" class="hash-link" aria-label="Direct link to What are permissions?" title="Direct link to What are permissions?" translate="no">​</a></h2>
<p>A <em>permission</em> is approval for your code to call one or more methods in the Root Community API. For example, if you write messages into community channels, you'll need the <code>CreateMessage</code> permission. If your code is performing automated moderation, it'll need the <code>Kick</code> and <code>CreateBan</code> permissions.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="where-are-permissions-needed">Where are permissions needed?<a href="#where-are-permissions-needed" class="hash-link" aria-label="Direct link to Where are permissions needed?" title="Direct link to Where are permissions needed?" translate="no">​</a></h2>
<p>Permissions are required to call <em>methods</em> in the Community API portion of the Root APIs. The <em>events</em> in the Community API are not gated by permissions; you can subscribe to any of them without additional permissions.</p>
<p>The table below lists the types where permissions are needed. Note that methods within the same type may require different permissions; for example, <code>CommunityMemberBanClient.create</code> requires <code>CreateBan</code> while <code>CommunityMemberBanClient.delete</code> requires <code>ManageBans</code>.</p>
<table><thead><tr><th>Types that require permissions for use</th></tr></thead><tbody><tr><td><code>AccessRuleClient</code></td></tr><tr><td><code>CommunityClient</code></td></tr><tr><td><code>CommunityMemberBanClient</code></td></tr><tr><td><code>CommunityMemberInviteClient</code></td></tr><tr><td><code>CommunityRoleClient</code></td></tr><tr><td><code>CommunityMemberClient</code></td></tr><tr><td><code>CommunityMemberRoleClient</code></td></tr><tr><td><code>ChannelClient</code></td></tr><tr><td><code>ChannelGroupClient</code></td></tr><tr><td><code>ChannelMessageClient</code></td></tr><tr><td><code>ChannelDirectoryClient</code></td></tr><tr><td><code>ChannelFileClient</code></td></tr><tr><td><code>ChannelWebRtcClient</code></td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-permissions-work">How do permissions work?<a href="#how-do-permissions-work" class="hash-link" aria-label="Direct link to How do permissions work?" title="Direct link to How do permissions work?" translate="no">​</a></h2>
<p>As a developer, you declare the permissions you need, and Root grants them to your code at runtime.</p>
<!-- -->
<p>The Community APIs contain permission checks. When your code calls a method, Root will test whether your code has the needed permission. If not, Root will throw <code>RootApiException</code> with the <code>errorCode</code> property set to a specific code for the type of permission failure. Your code can test the <code>errorCode</code> value to determine whether there was a permission failure.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockTitle_OeMC">Example test for permission failure</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> request</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ChannelMessageCreateRequest </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> channelId</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> myChannelId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> content</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">"hello"</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">await</span><span class="token plain"> rootServer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">community</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">channelMessages</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">create</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">xcpt</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(86, 156, 214)">unknown</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">xcpt </span><span class="token keyword" style="color:rgb(86, 156, 214)">instanceof</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">RootApiException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">xcpt</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">errorCode </span><span class="token operator" style="color:rgb(212, 212, 212)">===</span><span class="token plain"> ErrorCodeType</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">NoPermissionToCreate</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="which-permissions-are-available">Which permissions are available?<a href="#which-permissions-are-available" class="hash-link" aria-label="Direct link to Which permissions are available?" title="Direct link to Which permissions are available?" translate="no">​</a></h2>
<p>The following tables list all the permissions that you can include in your manifest. They're divided into two categories based on where they apply: community and channel.</p>
<table><thead><tr><th><strong>Community permissions</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>ManageCommunity</code></td><td>Edit community level settings like name and branding.</td></tr><tr><td><code>ManageRoles</code></td><td>Create, edit, delete, and assign community roles and their permissions.</td></tr><tr><td><code>ManageEmojis</code></td><td>Add, remove, or update custom emojis available across the community.</td></tr><tr><td><code>CreateInvite</code></td><td>Create a new invite link for the community.</td></tr><tr><td><code>ManageInvites</code></td><td>View, disable, expire, or edit community invite links (includes <code>CreateInvite</code>).</td></tr><tr><td><code>CreateBan</code></td><td>Ban a member from the community.</td></tr><tr><td><code>ManageBans</code></td><td>Review bans and unban or change ban settings (includes <code>CreateBan</code>).</td></tr><tr><td><code>Kick</code></td><td>Remove a member from the community without banning.</td></tr><tr><td><code>ChangeOtherNickname</code></td><td>Change another member’s display name in the community.</td></tr><tr><td><code>CreateChannelGroup</code></td><td>Create a channel group or category at the community level.</td></tr></tbody></table>
<table><thead><tr><th><strong>Channel permissions</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>FullControl</code></td><td>Admin level control for the channel (includes all channel permissions).</td></tr><tr><td><code>UseExternalEmoji</code></td><td>Use emojis not native to this community in the channel.</td></tr><tr><td><code>CreateMessage</code></td><td>Post messages in the channel.</td></tr><tr><td><code>DeleteMessageOther</code></td><td>Delete messages posted by other members.</td></tr><tr><td><code>ManagePinnedMessages</code></td><td>Pin and unpin messages in the channel.</td></tr><tr><td><code>ViewMessageHistory</code></td><td>Read messages posted prior to joining the channel.</td></tr><tr><td><code>CreateMessageAttachment</code></td><td>Attach files or media to a message.</td></tr><tr><td><code>CreateMessageMention</code></td><td>Mention users or roles in a message.</td></tr><tr><td><code>CreateMessageReaction</code></td><td>React to messages with emoji.</td></tr><tr><td><code>MoveUserOther</code></td><td>Move another user between voice rooms or channel instances.</td></tr><tr><td><code>VoiceMuteOther</code></td><td>Mute another user in voice.</td></tr><tr><td><code>VoiceDeafenOther</code></td><td>Deafen another user in voice.</td></tr><tr><td><code>VoiceKick</code></td><td>Remove another user from an active voice session.</td></tr><tr><td><code>ManageFiles</code></td><td>Create, view, and delete channel files (includes <code>CreateFile</code> and <code>ViewFile</code>)</td></tr><tr><td><code>CreateFile</code></td><td>Upload a new file into the channel.</td></tr><tr><td><code>ViewFile</code></td><td>View or download files in the channel.</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-to-choose-permissions">How to choose permissions<a href="#how-to-choose-permissions" class="hash-link" aria-label="Direct link to How to choose permissions" title="Direct link to How to choose permissions" translate="no">​</a></h2>
<p>Follow the principle of <em>least privilege</em> and include only what you need. Prefer granular keys over <code>Manage*</code> unless you truly need everything in that scope.</p>
<ol>
<li class="">
<p><strong>List your features:</strong> write down what your code needs to do, in plain English. Example: “Post updates in #announcements,” “Pin a weekly summary,” “Kick trolls from voice.”</p>
</li>
<li class="">
<p><strong>Map features to methods:</strong> Translate each feature into concrete actions. Example: “Post updates” → call the <code>ChannelMessageClient.create</code> method. “Ban unruly members” → call the <code>CommunityMemberBanClient.create</code> method.</p>
</li>
<li class="">
<p><strong>Map actions to permissions:</strong> Look up each method in the <a href="https://docs.rootapp.com/" target="_blank" rel="noopener noreferrer" class="">API reference</a> to find the exact permission you need.</p>
</li>
<li class="">
<p><strong>Declare:</strong> Use your <a class="" href="/docs/app-docs/configure/manifest-overview/">Root Manifest</a> to declare your permissions.</p>
</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="community-permissions-cant-be-modified-by-the-community">Community permissions can't be modified by the community<a href="#community-permissions-cant-be-modified-by-the-community" class="hash-link" aria-label="Direct link to Community permissions can't be modified by the community" title="Direct link to Community permissions can't be modified by the community" translate="no">​</a></h2>
<p>When a community member with the <code>Manage Apps</code> permission approves an installation into their community, they are implicitly granting your code all the <em>community</em> permissions in your manifest. The community cannot modify or revoke these permissions after installation.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="channel-permissions-can-be-modified-against-specific-channels-and-channel-groups">Channel permissions can be modified against specific channels and channel groups<a href="#channel-permissions-can-be-modified-against-specific-channels-and-channel-groups" class="hash-link" aria-label="Direct link to Channel permissions can be modified against specific channels and channel groups" title="Direct link to Channel permissions can be modified against specific channels and channel groups" translate="no">​</a></h2>
<p>Channel permissions are affected by the access rules and overlays that the community has in place. The community can modify your code's abilities after installation in two ways:</p>
<ul>
<li class="">They can limit what you can see.</li>
<li class="">They can change your permissions against specific channels or channel groups.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="your-results-are-always-limited-to-what-you-can-see">Your results are always limited to what you can see<a href="#your-results-are-always-limited-to-what-you-can-see" class="hash-link" aria-label="Direct link to Your results are always limited to what you can see" title="Direct link to Your results are always limited to what you can see" translate="no">​</a></h3>
<p>When you call a Community API method, your results are filtered by the channels and channel groups that the community has allowed you to see. You can <em>see</em> a channel or channel group under two conditions:</p>
<ul>
<li class="">You've been directly added to a channel or channel group.</li>
<li class="">You've been given a role that has been added to the channel or channel group.</li>
</ul>
<p>For example, suppose the community has two channel groups and two roles:</p>
<ul>
<li class="">The <strong>General</strong> channel group with the <strong>Everyone</strong> role added.</li>
<li class="">The <strong>Admin</strong> channel group with the <strong>Admins</strong> role added.</li>
</ul>
<p>When your code gets installed, it's granted the <strong>Everyone</strong> role automatically. At this point, if you call the <code>ChannelGroupClient.list</code> method, you'll only get back the <strong>General</strong> channel group. If the community adds you to <strong>Admin</strong> channel group directly or gives you the <strong>Admins</strong> role, then you'll suddenly start seeing both channel groups returned from the <code>list</code> call.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-community-can-modify-permissions-by-using-access-rule-overlays">The community can modify permissions by using access rule overlays<a href="#the-community-can-modify-permissions-by-using-access-rule-overlays" class="hash-link" aria-label="Direct link to The community can modify permissions by using access rule overlays" title="Direct link to The community can modify permissions by using access rule overlays" translate="no">​</a></h3>
<p>When the community adds your code to a channel or channel group, they can use an <em>overlay</em> to modify the permissions that you get when you operate inside that channel or channel group. This means they can override what's in your manifest.</p>
<p>Suppose your manifest includes the <code>ManageFiles</code> channel permission. This permission is powerful; it lets you create, view, move, and even delete files. Since you put this in your manifest, it means that your code is likely performing multiple file operations like creating temporary files and then deleting them when they're no longer needed.</p>
<p>The community can add you to a channel or channel group and configure an overlay that removes the <code>ManageFiles</code> permission and adds the <code>CreateFile</code> permission. Now, your code will be fine when it creates new files, but the <code>delete</code> method will now throw an exception with the <code>errorCode</code> set to <code>NoPermissionToDelete</code>.</p>
<p>In general, your code should always be ready to handle the failure of a Community API call due to lack of the needed channel permission.</p>